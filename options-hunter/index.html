<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéØ Options Hunter - Live Trading Scanner</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        @keyframes scanlines {
            0% { background-position: 0 0; }
            100% { background-position: 0 100%; }
        }

        @keyframes glow {
            0%, 100% { text-shadow: 0 0 10px #00ff41, 0 0 20px #00ff41; }
            50% { text-shadow: 0 0 20px #00ff41, 0 0 40px #00ff41; }
        }

        @keyframes flicker {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.95; }
        }

        body {
            font-family: 'Courier New', 'Consolas', monospace;
            background: #000;
            color: #00ff41;
            padding: 20px;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                repeating-linear-gradient(
                    0deg,
                    rgba(0, 255, 65, 0.03) 0px,
                    rgba(0, 255, 65, 0.03) 1px,
                    transparent 1px,
                    transparent 2px
                );
            pointer-events: none;
            animation: scanlines 8s linear infinite;
            z-index: 1;
        }

        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at center, transparent 0%, rgba(0, 0, 0, 0.3) 100%);
            pointer-events: none;
            z-index: 1;
        }

        .content-wrapper {
            position: relative;
            z-index: 2;
            animation: flicker 4s infinite;
        }

        /* Windows 95 Style Window Chrome */
        .window {
            background: #c0c0c0;
            border: 2px solid;
            border-color: #ffffff #000000 #000000 #ffffff;
            box-shadow: 
                inset 1px 1px 0 #dfdfdf,
                inset -1px -1px 0 #808080,
                2px 2px 10px rgba(0, 255, 65, 0.3);
            margin-bottom: 20px;
        }

        .title-bar {
            background: linear-gradient(90deg, #000080, #1084d0);
            padding: 3px 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #000;
        }

        .title-text {
            color: #fff;
            font-weight: bold;
            font-size: 14px;
            letter-spacing: 0.5px;
        }

        .window-buttons {
            display: flex;
            gap: 2px;
        }

        .window-button {
            width: 16px;
            height: 14px;
            background: #c0c0c0;
            border: 1px solid;
            border-color: #ffffff #000000 #000000 #ffffff;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .window-content {
            background: #000;
            padding: 20px;
            border: 2px solid #000;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 48px;
            font-weight: bold;
            color: #00ff41;
            text-shadow: 
                0 0 10px #00ff41,
                0 0 20px #00ff41,
                0 0 30px #00ff41,
                0 0 40px #00ff41,
                0 0 70px #00ff41;
            animation: glow 2s ease-in-out infinite;
            letter-spacing: 4px;
            font-family: 'Courier New', monospace;
        }

        .header .subtitle {
            color: #ff0080;
            font-size: 14px;
            margin-top: 10px;
            letter-spacing: 2px;
            text-shadow: 0 0 10px #ff0080;
        }

        .api-status {
            display: inline-block;
            padding: 5px 15px;
            background: #00ff41;
            color: #000;
            border: 2px solid;
            border-color: #00ff41 #008020 #008020 #00ff41;
            font-weight: bold;
            font-size: 12px;
            margin-top: 15px;
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.5);
            animation: glow 2s ease-in-out infinite;
        }

        /* Cyberpunk Neon Cards */
        .card {
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid #00ff41;
            border-radius: 0;
            padding: 20px;
            margin-bottom: 15px;
            position: relative;
            box-shadow: 
                0 0 10px rgba(0, 255, 65, 0.3),
                inset 0 0 20px rgba(0, 255, 65, 0.1);
            transition: all 0.3s;
            cursor: pointer;
        }

        .card::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #00ff41, #ff0080, #00ffff, #ff0080);
            z-index: -1;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .card:hover::before {
            opacity: 1;
            animation: glow 1s ease-in-out infinite;
        }

        .card:hover {
            border-color: #ff0080;
            box-shadow: 
                0 0 20px rgba(255, 0, 128, 0.5),
                inset 0 0 30px rgba(255, 0, 128, 0.2);
            transform: translateY(-2px);
        }

        .waitlist-banner h2 {
            margin-bottom: 15px;
            font-size: 24px;
        }

        .waitlist-form {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .waitlist-input {
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            flex: 1;
            min-width: 250px;
            max-width: 350px;
        }

        .waitlist-btn {
            padding: 12px 30px;
            background: white;
            color: #ff6b00;
            border: none;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            font-size: 16px;
        }

        .waitlist-btn:hover {
            background: #f0f0f0;
        }

        .api-status {
            display: inline-block;
            padding: 5px 15px;
            background: #00ff00;
            color: #000;
            border-radius: 20px;
            font-weight: bold;
            font-size: 12px;
            margin-top: 10px;
        }

        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            background: linear-gradient(180deg, #00ff00 0%, #00cc00 100%);
            color: #000;
            border: none;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .btn:hover {
            transform: scale(1.05);
        }

        .btn-secondary {
            background: linear-gradient(180deg, #00bfff 0%, #0099cc 100%);
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(0, 255, 0, 0.2);
            border-radius: 10px;
            padding: 20px;
            transition: all 0.3s;
            cursor: pointer;
        }

        .card:hover {
            border-color: #00ff00;
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.3);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .symbol {
            font-size: 24px;
            font-weight: bold;
            color: #00ff00;
        }

        .price {
            font-size: 32px;
            font-weight: bold;
            margin: 10px 0;
        }

        .change {
            font-size: 18px;
            padding: 5px 10px;
            border-radius: 5px;
        }

        .positive {
            color: #00ff00;
            background: rgba(0, 255, 0, 0.1);
        }

        .negative {
            color: #ff3333;
            background: rgba(255, 51, 51, 0.1);
        }

        .signals {
            margin-top: 15px;
        }

        .signal-badge {
            display: inline-block;
            padding: 5px 10px;
            background: rgba(255, 165, 0, 0.2);
            color: #ffa500;
            border-radius: 5px;
            font-size: 12px;
            margin: 5px 5px 0 0;
        }

        .indicator {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .indicator-label {
            color: #888;
        }

        .indicator-value {
            font-weight: bold;
        }

        .loading {
            text-align: center;
            padding: 40px;
            font-size: 24px;
        }

        .scanner-status {
            text-align: center;
            padding: 20px;
            background: rgba(0, 255, 0, 0.1);
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .timestamp {
            color: #888;
            font-size: 12px;
            text-align: center;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üéØ OPTIONS HUNTER</h1>
        <p>Real-Time Trading Scanner with Tradier Production Data</p>
        <span class="api-status">‚úÖ LIVE DATA</span>
    </div>

    <!-- Waitlist Banner -->
    <div class="waitlist-banner">
        <h2>üî• Get Early Access + Lifetime Discount</h2>
        <p style="margin-bottom: 15px;">Join 1,000+ traders getting real-time options alerts</p>
        <form class="waitlist-form" onsubmit="joinWaitlist(event)">
            <input type="email" id="waitlistEmail" class="waitlist-input" placeholder="Enter your email" required>
            <button type="submit" class="waitlist-btn">Join Waitlist ‚Üí</button>
        </form>
        <p id="waitlistMessage" style="margin-top: 10px; font-weight: bold;"></p>
        <div style="margin-top: 20px; padding: 15px; background: rgba(0,0,0,0.3); border-radius: 8px;">
            <p style="margin: 0 0 10px 0; font-size: 14px;">üíé Get instant access with 3 pricing tiers:</p>
            <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                <button onclick="window.location.href='pricing.html'" style="flex: 1; min-width: 200px; background: linear-gradient(135deg, #0052FF 0%, #764ba2 100%); color: white; padding: 12px 24px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; font-size: 16px;">
                    View Pricing ($29-$149/mo) ‚Üí
                </button>
                <button onclick="window.location.href='paper-trading.html'" style="flex: 1; min-width: 200px; background: rgba(16, 185, 129, 0.2); border: 2px solid #10b981; color: #10b981; padding: 12px 24px; border-radius: 5px; cursor: pointer; font-weight: bold; font-size: 16px;">
                    üìä View Live Performance
                </button>
            </div>
        </div>
    </div>

    <div class="controls">
        <button class="btn" onclick="quickScan()">‚ö° QUICK SCAN</button>
        <button class="btn" onclick="budgetScan()">üí∞ SCAN BY BUDGET</button>
        <button class="btn btn-secondary" onclick="loadSymbol()">üìä ANALYZE STOCK</button>
        <button class="btn btn-secondary" onclick="location.reload()">üîÑ REFRESH</button>
    </div>

    <div id="budgetControls" style="display: none; text-align: center; margin-bottom: 20px; padding: 20px; background: rgba(255,255,255,0.05); border-radius: 10px;">
        <label style="margin-right: 10px; font-size: 18px;">üíµ Your Budget: $</label>
        <input type="number" id="budgetInput" value="100" min="50" max="10000" step="50" 
               style="padding: 10px; font-size: 16px; width: 150px; border-radius: 5px; border: 2px solid #00ff00;">
        <button class="btn" onclick="runBudgetScan()" style="margin-left: 15px;">üöÄ FIND OPTIONS</button>
    </div>

    <script>
        const API_BASE = window.location.origin.replace('8700', '8700'); // Same port

        function budgetScan() {
            document.getElementById('budgetControls').style.display = 'block';
            document.getElementById('results').innerHTML = '<div class="loading">üí° Enter your budget above to find options</div>';
        }

        async function runBudgetScan() {
            const budget = document.getElementById('budgetInput').value;
            document.getElementById('results').innerHTML = '<div class="loading">üîç Scanning 100+ stocks for $' + budget + ' budget...</div>';

            try {
                const response = await fetch(`${API_BASE}/api/scan-budget?budget=${budget}&risk_level=medium`);
                const data = await response.json();

                if (data.success) {
                    displayBudgetResults(data);
                } else {
                    document.getElementById('results').innerHTML = '<div class="loading">‚ùå Scan failed</div>';
                }
            } catch (error) {
                console.error('Budget scan error:', error);
                document.getElementById('results').innerHTML = '<div class="loading">‚ùå Error: ' + error.message + '</div>';
            }
        }

        function displayBudgetResults(data) {
            const container = document.getElementById('results');
            
            let html = `
                <div class="card" style="grid-column: 1 / -1; background: rgba(0,255,0,0.1);">
                    <h2>üí∞ Budget: $${data.budget} | üîç Scanned: ${data.stocks_scanned} stocks | ‚úÖ Found: ${data.opportunities_found} opportunities</h2>
                    <p style="margin-top: 10px; color: #888;">Showing top ${data.top_picks.length} best value options</p>
                </div>
            `;

            data.top_picks.forEach(opp => {
                const profitColor = opp.potential_profit_pct > 30 ? '#00ff00' : '#ffa500';
                
                html += `
                    <div class="card" style="cursor: pointer;" onclick="analyzeStock('${opp.symbol}')">
                        <div class="card-header">
                            <div class="symbol">${opp.symbol}</div>
                            <span style="background: ${profitColor}; color: #000; padding: 3px 8px; border-radius: 5px; font-size: 12px; font-weight: bold;">
                                Score: ${opp.score}
                            </span>
                        </div>
                        <div style="font-size: 18px; margin: 10px 0;">
                            <strong>${opp.type.toUpperCase()}</strong> Strike: $${opp.strike}
                        </div>
                        <div class="indicator">
                            <span class="indicator-label">Cost</span>
                            <span class="indicator-value" style="color: #00ff00;">$${opp.cost}</span>
                        </div>
                        <div class="indicator">
                            <span class="indicator-label">Stock Price</span>
                            <span class="indicator-value">$${opp.stock_price.toFixed(2)}</span>
                        </div>
                        <div class="indicator">
                            <span class="indicator-label">Potential Profit</span>
                            <span class="indicator-value" style="color: ${profitColor};">${opp.potential_profit_pct}%</span>
                        </div>
                        <div class="indicator">
                            <span class="indicator-label">Expiration</span>
                            <span class="indicator-value">${opp.expiration}</span>
                        </div>
                        <div class="indicator">
                            <span class="indicator-label">Volume</span>
                            <span class="indicator-value">${opp.volume}</span>
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html;
            document.getElementById('timestamp').textContent = `Last updated: ${new Date(data.timestamp).toLocaleString()}`;
        }

        async function quickScan() {
    <div id="results" class="grid"></div>

    <div class="timestamp" id="timestamp"></div>

    <script>
        const API_BASE = window.location.origin.replace('8700', '8700'); // Same port

        async function scanMarket() {
            document.getElementById('budgetControls').style.display = 'none';
            document.getElementById('scannerStatus').style.display = 'block';
            document.getElementById('results').innerHTML = '<div class="loading">‚ö° Quick scanning top 30 stocks...</div>';

            try {
                const response = await fetch(`${API_BASE}/api/quick-scan`);
                const data = await response.json();

                if (data.success) {
                    displayResults(data.results);
                    document.getElementById('timestamp').textContent = `Last updated: ${new Date(data.timestamp).toLocaleString()}`;
                } else {
                    document.getElementById('results').innerHTML = '<div class="loading">‚ùå Scan failed</div>';
                }
            } catch (error) {
                console.error('Scan error:', error);
                document.getElementById('results').innerHTML = '<div class="loading">‚ùå Error: ' + error.message + '</div>';
            }

            document.getElementById('scannerStatus').style.display = 'none';
        }

        function displayResults(results) {
            const container = document.getElementById('results');
            container.innerHTML = '';

            results.forEach(stock => {
                const card = document.createElement('div');
                card.className = 'card';

                const changeClass = stock.change >= 0 ? 'positive' : 'negative';
                const changeSign = stock.change >= 0 ? '+' : '';

                let signalBadges = '';
                stock.signals.forEach(signal => {
                    signalBadges += `<span class="signal-badge">${signal}</span>`;
                });

                card.innerHTML = `
                    <div class="card-header">
                        <div class="symbol">${stock.symbol}</div>
                    </div>
                    <div class="price">$${stock.price.toFixed(2)}</div>
                    <div class="change ${changeClass}">
                        ${changeSign}${stock.change.toFixed(2)} (${changeSign}${stock.change_percent.toFixed(2)}%)
                    </div>
                    <div class="indicator">
                        <span class="indicator-label">Volume</span>
                        <span class="indicator-value">${(stock.volume / 1000000).toFixed(2)}M</span>
                    </div>
                    ${stock.signals.length > 0 ? `<div class="signals">${signalBadges}</div>` : ''}
                `;

                card.onclick = () => analyzeStock(stock.symbol);
                container.appendChild(card);
            });
        }

        async function analyzeStock(symbol) {
            if (!symbol) {
                symbol = prompt('Enter stock symbol (e.g., AAPL):');
                if (!symbol) return;
            }

            document.getElementById('results').innerHTML = '<div class="loading">üìä Analyzing ' + symbol + '...</div>';

            try {
                const response = await fetch(`${API_BASE}/api/analysis/${symbol}`);
                const data = await response.json();

                if (data.success) {
                    displayAnalysis(data.data);
                } else {
                    document.getElementById('results').innerHTML = '<div class="loading">‚ùå Analysis failed</div>';
                }
            } catch (error) {
                console.error('Analysis error:', error);
                document.getElementById('results').innerHTML = '<div class="loading">‚ùå Error: ' + error.message + '</div>';
            }
        }

        function displayAnalysis(analysis) {
            const container = document.getElementById('results');
            const changeClass = analysis.change >= 0 ? 'positive' : 'negative';
            const changeSign = analysis.change >= 0 ? '+' : '';

            let signalBadges = '';
            analysis.signals.forEach(signal => {
                signalBadges += `<span class="signal-badge">${signal}</span>`;
            });

            let indicators = '';
            for (const [key, value] of Object.entries(analysis.indicators)) {
                indicators += `
                    <div class="indicator">
                        <span class="indicator-label">${key.toUpperCase()}</span>
                        <span class="indicator-value">${value}</span>
                    </div>
                `;
            }

            container.innerHTML = `
                <div class="card" style="grid-column: 1 / -1;">
                    <div class="card-header">
                        <div class="symbol">${analysis.symbol}</div>
                        <button class="btn btn-secondary" onclick="scanMarket()">‚Üê Back to Scan</button>
                    </div>
                    <div class="price">$${analysis.price.toFixed(2)}</div>
                    <div class="change ${changeClass}">
                        ${changeSign}${analysis.change.toFixed(2)} (${changeSign}${analysis.change_percent.toFixed(2)}%)
                    </div>
                    <div class="indicator">
                        <span class="indicator-label">Volume</span>
                        <span class="indicator-value">${(analysis.volume / 1000000).toFixed(2)}M</span>
                    </div>
                    ${indicators}
                    ${analysis.signals.length > 0 ? `<div class="signals">${signalBadges}</div>` : '<p style="margin-top: 15px; color: #888;">No significant signals detected</p>'}
                </div>
            `;
        }

        function loadSymbol() {
            analyzeStock();
        }

        // Waitlist submission
        async function joinWaitlist(event) {
            event.preventDefault();
            const email = document.getElementById('waitlistEmail').value;
            const messageEl = document.getElementById('waitlistMessage');
            
            try {
                const response = await fetch('/api/waitlist', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email })
                });
                
                if (response.ok) {
                    messageEl.textContent = '‚úÖ You\'re on the list! Check your email.';
                    messageEl.style.color = '#00ff00';
                    document.getElementById('waitlistEmail').value = '';
                } else {
                    throw new Error('Failed to join');
                }
            } catch (error) {
                messageEl.textContent = '‚ùå Error. Try again!';
                messageEl.style.color = '#ff0000';
            }
        }

        // Coinbase Commerce crypto payment
        function openCryptoPayment() {
            const checkoutLink = 'https://commerce.coinbase.com/checkout/8afd03b3-eeb7-435c-a474-dbd8682621a3';
            window.open(checkoutLink, '_blank');
        }

        // Auto-scan on load
        window.onload = () => {
            quickScan();
        };
    </script>
</body>
</html>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #000;
            color: #fff;
            padding: 20px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .disclaimer {
            background: #1a1a1a;
            border: 2px solid #ff3b30;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 24px;
            color: #ff3b30;
            font-weight: 600;
            text-align: center;
        }
        
        .mode-banner {
            background: #2d2d2d;
            border-radius: 12px;
            padding: 12px;
            margin-bottom: 20px;
            text-align: center;
            font-weight: 600;
        }
        
        .mode-banner.live {
            background: #1a4d2e;
            color: #4ade80;
        }
        
        .mode-banner.delayed {
            background: #3a2d5c;
            color: #c084fc;
        }
        
        /* Header */
        .header {
            text-align: center;
            margin-bottom: 32px;
        }
        
        .ticker-display {
            font-size: 48px;
            font-weight: 700;
            margin-bottom: 8px;
        }
        
        .price-display {
            font-size: 32px;
            color: #4ade80;
            margin-bottom: 4px;
        }
        
        .price-label {
            font-size: 14px;
            color: #888;
        }
        
        /* Mode Selectors */
        .mode-selectors {
            background: #1a1a1a;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 24px;
        }
        
        .selector-row {
            display: flex;
            gap: 12px;
            margin-bottom: 16px;
        }
        
        .selector-row:last-child {
            margin-bottom: 0;
        }
        
        .selector-label {
            font-size: 12px;
            color: #888;
            margin-bottom: 8px;
            text-transform: uppercase;
            font-weight: 600;
        }
        
        .segment-btn {
            flex: 1;
            padding: 14px;
            border: 2px solid #333;
            background: #000;
            color: #fff;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .segment-btn:hover {
            border-color: #555;
        }
        
        .segment-btn.active {
            border-color: #4ade80;
            background: #1a4d2e;
            color: #4ade80;
        }
        
        .segment-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }
        
        /* Date selector */
        .date-scroll {
            display: flex;
            gap: 8px;
            overflow-x: auto;
            padding: 4px 0;
            -webkit-overflow-scrolling: touch;
        }
        
        .date-scroll::-webkit-scrollbar {
            height: 6px;
        }
        
        .date-scroll::-webkit-scrollbar-thumb {
            background: #333;
            border-radius: 3px;
        }
        
        .date-btn {
            padding: 10px 16px;
            border: 2px solid #333;
            background: #000;
            color: #fff;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.2s;
        }
        
        .date-btn:hover {
            border-color: #555;
        }
        
        .date-btn.active {
            border-color: #4ade80;
            background: #1a4d2e;
            color: #4ade80;
        }
        
        /* Input section */
        .input-section {
            background: #1a1a1a;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 24px;
        }
        
        .input-row {
            display: flex;
            gap: 16px;
        }
        
        .input-group {
            flex: 1;
        }
        
        .input-group label {
            display: block;
            font-size: 12px;
            color: #888;
            margin-bottom: 8px;
            text-transform: uppercase;
            font-weight: 600;
        }
        
        .input-group input {
            width: 100%;
            padding: 14px;
            background: #000;
            border: 2px solid #333;
            border-radius: 8px;
            color: #fff;
            font-size: 16px;
        }
        
        .input-group input:focus {
            outline: none;
            border-color: #4ade80;
        }
        
        .hunt-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #4ade80, #22c55e);
            border: none;
            border-radius: 12px;
            color: #000;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            margin-top: 16px;
            transition: transform 0.2s;
        }
        
        .hunt-btn:hover {
            transform: translateY(-2px);
        }
        
        .hunt-btn:active {
            transform: translateY(0);
        }
        
        /* Suggested Move Card */
        .suggested-card {
            background: linear-gradient(135deg, #1a4d2e, #0f3a1f);
            border: 2px solid #4ade80;
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 24px;
        }
        
        .suggested-card.bearish {
            background: linear-gradient(135deg, #4d1a1a, #3a0f0f);
            border-color: #ef4444;
        }
        
        .suggested-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .grade-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 700;
        }
        
        .grade-badge.GREEN {
            background: #4ade80;
            color: #000;
        }
        
        .grade-badge.YELLOW {
            background: #fbbf24;
            color: #000;
        }
        
        .grade-badge.RED {
            background: #ef4444;
            color: #fff;
        }
        
        .suggested-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin-bottom: 20px;
        }
        
        .detail-item {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }
        
        .detail-label {
            font-size: 12px;
            color: #888;
            text-transform: uppercase;
        }
        
        .detail-value {
            font-size: 20px;
            font-weight: 700;
        }
        
        .detail-value.confidence {
            color: #4ade80;
            font-size: 24px;
        }
        
        .explanation {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            line-height: 1.6;
        }
        
        .risk-warning {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid #ef4444;
            border-radius: 12px;
            padding: 16px;
            color: #ef4444;
            line-height: 1.6;
        }
        
        /* Options Chain */
        .chain-section {
            background: #1a1a1a;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 24px;
        }
        
        .chain-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 16px;
        }
        
        .option-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            background: #000;
            border: 2px solid #333;
            border-radius: 12px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .option-row:hover {
            border-color: #555;
        }
        
        .option-row.call {
            border-left: 4px solid #4ade80;
        }
        
        .option-row.put {
            border-left: 4px solid #ef4444;
        }
        
        .option-left {
            flex: 1;
        }
        
        .option-strike {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 4px;
        }
        
        .option-meta {
            font-size: 12px;
            color: #888;
            margin-bottom: 2px;
        }
        
        .option-right {
            text-align: right;
        }
        
        .option-price {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: #4ade80;
            color: #000;
            border-radius: 20px;
            font-size: 18px;
            font-weight: 700;
        }
        
        .option-price.put {
            background: #ef4444;
            color: #fff;
        }
        
        /* Strategy Builder */
        .strategy-section {
            background: #1a1a1a;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 24px;
        }
        
        .strategy-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 16px;
        }
        
        .strategy-cards {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }
        
        .strategy-card {
            padding: 20px;
            background: #000;
            border: 2px solid #333;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .strategy-card:hover {
            border-color: #555;
            transform: translateY(-2px);
        }
        
        .strategy-card.bullish {
            border-color: #4ade80;
        }
        
        .strategy-card.bearish {
            border-color: #ef4444;
        }
        
        .strategy-name {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 4px;
        }
        
        .strategy-bias {
            font-size: 12px;
            color: #888;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #888;
        }
        
        .error {
            background: #4d1a1a;
            border: 2px solid #ef4444;
            border-radius: 12px;
            padding: 20px;
            color: #ef4444;
            text-align: center;
        }
        
        @media (max-width: 600px) {
            .suggested-details {
                grid-template-columns: 1fr;
            }
            
            .strategy-cards {
                grid-template-columns: 1fr;
            }
            
            .input-row {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="disclaimer">
            ‚ö†Ô∏è This is NOT financial advice. Options are VERY risky. You can lose 100% of your money. This is for learning only.
        </div>
        
        <div id="modeBanner" class="mode-banner" style="display:none;"></div>
        
        <div class="header">
            <div class="ticker-display">Options Hunter</div>
            <div class="price-label">We'll search the market for the best trade for your budget</div>
        </div>
        
        <div class="mode-selectors">
            <div class="selector-row">
                <div class="selector-label">Scanner Mode</div>
            </div>
            <div class="selector-row">
                <button class="segment-btn active" id="autoModeBtn">üöÄ Auto Mode (Recommended)</button>
                <button class="segment-btn" id="manualModeBtn">üéØ Manual Ticker</button>
            </div>
            
            <div class="selector-row">
                <div class="selector-label">Action</div>
            </div>
            <div class="selector-row">
                <button class="segment-btn active" id="buyBtn">Buy</button>
                <button class="segment-btn" id="sellBtn" disabled>Sell (Coming Soon)</button>
            </div>
            
            <div class="selector-row">
                <div class="selector-label">Type</div>
            </div>
            <div class="selector-row">
                <button class="segment-btn active" id="callBtn">Call</button>
                <button class="segment-btn" id="putBtn">Put</button>
            </div>
            
            <div class="selector-row">
                <div class="selector-label">Expiration</div>
            </div>
            <div class="date-scroll" id="dateScroll">
                <!-- Dates populated dynamically -->
            </div>
        </div>
        
        <div class="input-section">
            <div class="input-row">
                <div class="input-group" id="tickerGroup" style="display:none;">
                    <label>Ticker</label>
                    <input type="text" id="tickerInput" value="" placeholder="e.g. NVDA, TSLA">
                </div>
                <div class="input-group">
                    <label>Budget</label>
                    <input type="number" id="budgetInput" value="200" placeholder="100">
                </div>
            </div>
            <button class="hunt-btn" id="huntBtn">üöÄ Find Best Trade For Me</button>
        </div>
        
        <div id="results"></div>
    </div>
    
    <script>
        // State
        let state = {
            mode: 'auto',  // 'auto' or 'manual'
            ticker: '',
            budget: 200,
            action: 'buy',
            type: 'call',
            expiry: null,
            spot: null,
            dataMode: null
        };
        
        let availableExpiries = [];
        
        // Initialize
        init();
        
        async function init() {
            setupEventListeners();
            await loadAvailableExpiries();
            updateDisplay();
            
            // Auto-fetch recommendation on page load if in auto mode
            if (state.mode === 'auto') {
                await hunt();
            }
        }
        
        function setupEventListeners() {
            document.getElementById('autoModeBtn').addEventListener('click', () => selectMode('auto'));
            document.getElementById('manualModeBtn').addEventListener('click', () => selectMode('manual'));
            document.getElementById('callBtn').addEventListener('click', () => selectType('call'));
            document.getElementById('putBtn').addEventListener('click', () => selectType('put'));
            document.getElementById('huntBtn').addEventListener('click', hunt);
            document.getElementById('tickerInput').addEventListener('change', (e) => {
                state.ticker = e.target.value.toUpperCase().trim();
            });
            document.getElementById('budgetInput').addEventListener('change', (e) => {
                state.budget = parseFloat(e.target.value) || 100;
            });
        }
        
        function selectMode(mode) {
            state.mode = mode;
            document.getElementById('autoModeBtn').classList.toggle('active', mode === 'auto');
            document.getElementById('manualModeBtn').classList.toggle('active', mode === 'manual');
            
            // Show/hide ticker input
            const tickerGroup = document.getElementById('tickerGroup');
            const huntBtn = document.getElementById('huntBtn');
            
            if (mode === 'auto') {
                tickerGroup.style.display = 'none';
                huntBtn.textContent = 'üöÄ Find Best Trade For Me';
            } else {
                tickerGroup.style.display = 'block';
                huntBtn.textContent = 'üéØ Find Best Trade For This Stock';
            }
        }
        
        function selectType(type) {
            state.type = type;
            document.getElementById('callBtn').classList.toggle('active', type === 'call');
            document.getElementById('putBtn').classList.toggle('active', type === 'put');
        }
        
        function selectExpiry(expiry) {
            state.expiry = expiry;
            renderDateButtons();
        }
        
        async function loadAvailableExpiries() {
            // Generate next 8 Fridays as available expiries
            availableExpiries = [];
            const today = new Date();
            let current = new Date(today);
            
            // Find next Friday
            const dayOfWeek = current.getDay();
            const daysUntilFriday = (5 - dayOfWeek + 7) % 7 || 7;
            current.setDate(current.getDate() + daysUntilFriday);
            
            // Add 8 Fridays
            for (let i = 0; i < 8; i++) {
                availableExpiries.push(formatDate(new Date(current)));
                current.setDate(current.getDate() + 7);
            }
            
            // Select first Friday by default
            state.expiry = availableExpiries[0];
            renderDateButtons();
        }
        
        function renderDateButtons() {
            const container = document.getElementById('dateScroll');
            container.innerHTML = availableExpiries.map(date => {
                const dateObj = new Date(date + 'T00:00:00');
                const label = dateObj.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
                const active = date === state.expiry ? 'active' : '';
                return `<button class="date-btn ${active}" onclick="selectExpiry('${date}')">${label}</button>`;
            }).join('');
        }
        
        function formatDate(date) {
            return date.toISOString().slice(0, 10);
        }
        
        function updateDisplay() {
            // No need to update ticker display in auto mode
        }
        
        async function hunt() {
            const results = document.getElementById('results');
            results.innerHTML = '<div class="loading">Scanning entire market for best trade...</div>';
            
            // Note: bias is now optional - backend will auto-detect direction
            const bias = state.type === 'call' ? 'bullish' : 'bearish';
            
            try {
                let endpoint, params;
                
                if (state.mode === 'auto') {
                    // Auto mode: call /api/auto-recommend (scans broad universe)
                    endpoint = '/api/auto-recommend';
                    params = new URLSearchParams({
                        budget: state.budget,
                        expiry: state.expiry,
                        bias: bias  // Optional hint, backend will analyze both directions
                    });
                } else {
                    // Manual mode: call /api/auto-recommend with specific ticker
                    if (!state.ticker) {
                        results.innerHTML = '<div class="error">Please enter a ticker symbol</div>';
                        return;
                    }
                    endpoint = '/api/auto-recommend';
                    params = new URLSearchParams({
                        budget: state.budget,
                        expiry: state.expiry,
                        bias: bias,
                        tickers: state.ticker
                    });
                }
                
                const response = await fetch(`${endpoint}?${params}`);
                const data = await response.json();
                
                if (!response.ok) {
                    results.innerHTML = `<div class="error">${data.error || 'Failed to load recommendation'}</div>`;
                    return;
                }
                
                // Update mode banner
                const modeBanner = document.getElementById('modeBanner');
                if (data.data_mode) {
                    state.dataMode = data.data_mode;
                    modeBanner.className = `mode-banner ${data.data_mode}`;
                    modeBanner.textContent = data.data_mode === 'live' 
                        ? 'üü¢ LIVE MODE ‚Äì Real-time data' 
                        : 'üü† DELAYED MODE ‚Äì Practice data (15-min delay)';
                    modeBanner.style.display = 'block';
                }
                
                // Render recommendation
                renderAutoRecommendation(data);
                
            } catch (error) {
                console.error(error);
                results.innerHTML = '<div class="error">Failed to load recommendation. Please try again.</div>';
            }
        }
        
        function renderAutoRecommendation(data) {
            const results = document.getElementById('results');
            let html = '';
            
            const rec = data.primary_recommendation;
            
            if (!rec) {
                html = `<div class="error">${data.message || 'No recommendation available'}</div>`;
                results.innerHTML = html;
                return;
            }
            
            // Show market direction analysis if available
            if (data.favored_direction) {
                const directionEmoji = data.favored_direction === 'CALL' ? 'üìà' : 'üìâ';
                const directionText = data.favored_direction === 'CALL' ? 'BULLISH' : 'BEARISH';
                const directionColor = data.favored_direction === 'CALL' ? '#4ade80' : '#ef4444';
                
                html += `
                    <div style="background: rgba(0,0,0,0.3); border-radius: 12px; padding: 16px; margin-bottom: 20px; text-align: center;">
                        <div style="font-size: 14px; color: #888; margin-bottom: 8px;">Market Analysis</div>
                        <div style="font-size: 24px; font-weight: 700; color: ${directionColor};">
                            ${directionEmoji} ${directionText}
                        </div>
                        <div style="font-size: 12px; color: #888; margin-top: 8px;">
                            Call Score: ${data.total_call_score || 0} ‚Ä¢ Put Score: ${data.total_put_score || 0}
                        </div>
                    </div>
                `;
            }
            
            // Suggested move card with ticker name
            const isBearish = rec.action === 'BUY_PUT';
            const cardClass = isBearish ? 'bearish' : '';
            const actionText = rec.action.replace('_', ' ');
            
            html += `
                <div class="suggested-card ${cardClass}">
                    <div class="suggested-title">
                        We found your best trade
                        <span class="grade-badge ${rec.grade}">${rec.grade}</span>
                    </div>
                    
                    <div class="suggested-details">
                        <div class="detail-item">
                            <div class="detail-label">Ticker</div>
                            <div class="detail-value">${rec.ticker}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Confidence</div>
                            <div class="detail-value confidence" title="${rec.confirmations ? rec.confirmations.join(', ') : 'Based on technical analysis'}">${rec.confidence}% 
                                ${rec.confirmations && rec.confirmations.length > 0 ? '<span style="cursor:help; font-size:12px;">‚ÑπÔ∏è</span>' : ''}
                            </div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Suggested Move</div>
                            <div class="detail-value">${actionText}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Strike</div>
                            <div class="detail-value">$${rec.strike.toFixed(2)}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Expiration</div>
                            <div class="detail-value">${new Date(rec.expiration + 'T00:00:00').toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Cost</div>
                            <div class="detail-value">~$${rec.cost_per_contract.toFixed(2)}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Contracts</div>
                            <div class="detail-value">${rec.contracts} fits your budget of $${data.budget}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Breakeven</div>
                            <div class="detail-value">$${rec.breakeven.toFixed(2)}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Est. Profit (+10%)</div>
                            <div class="detail-value">${rec.est_profit_10 >= 0 ? '+' : ''}$${rec.est_profit_10.toFixed(2)}</div>
                        </div>
                    </div>
                    
                    <div class="explanation">
                        ${rec.explanation_simple}
                    </div>
                    
                    <div class="risk-warning">
                        ‚ö†Ô∏è ${rec.explanation_risks}
                    </div>
                    
                    <div style="margin-top:16px; font-size:12px; color:#888;">
                        Data: ${data.data_mode} ‚Ä¢ Source: ${data.options_source}
                    </div>
                </div>
            `;
            
            // Strategy builder
            html += `
                <div class="strategy-section">
                    <div class="strategy-title">Quick Switch Strategy</div>
                    <div class="strategy-cards">
                        <div class="strategy-card bullish" onclick="selectType('call'); hunt();">
                            <div class="strategy-name">üìà Long Call</div>
                            <div class="strategy-bias">Bullish</div>
                        </div>
                        <div class="strategy-card bearish" onclick="selectType('put'); hunt();">
                            <div class="strategy-name">üìâ Long Put</div>
                            <div class="strategy-bias">Bearish</div>
                        </div>
                    </div>
                </div>
            `;
            
            // Alternatives chain
            if (data.alternatives && data.alternatives.length > 0) {
                html += `
                    <div class="chain-section">
                        <div class="chain-title">Other Options (Next Best ${data.alternatives.length})</div>
                `;
                
                for (const alt of data.alternatives) {
                    const type = alt.action.includes('CALL') ? 'call' : 'put';
                    const typeLabel = type === 'call' ? 'call' : 'put';
                    const confidence = alt.confidence || 0;
                    const confirmationsText = alt.confirmations && alt.confirmations.length > 0 
                        ? alt.confirmations.join(', ') 
                        : 'technical analysis';
                    
                    html += `
                        <div class="option-row ${type}">
                            <div class="option-left">
                                <div class="option-strike">${alt.ticker} $${alt.strike.toFixed(2)} ${typeLabel}</div>
                                <div class="option-meta" title="${confirmationsText}">Confidence: ${confidence.toFixed(1)}% ${alt.confirmations && alt.confirmations.length > 0 ? '‚ÑπÔ∏è' : ''}</div>
                                <div class="option-meta">Cost ~$${alt.cost_per_contract.toFixed(2)} ‚Ä¢ Breakeven $${alt.breakeven.toFixed(2)} ‚Ä¢ Est +$${alt.est_profit_10.toFixed(2)} at +10%</div>
                            </div>
                            <div class="option-right">
                                <div class="option-price ${type}">
                                    $${alt.cost_per_contract.toFixed(2)}
                                    <span>+</span>
                                </div>
                            </div>
                        </div>
                    `;
                }
                
                html += `</div>`;
            }
            
            results.innerHTML = html;
        }
    </script>
</body>
</html>

<!-- PayPal Button Integration -->
<script>
function openPayPalPayment() {
    // User will create PayPal subscription button and replace this URL
    window.open('https://www.paypal.com/webapps/billing/plans/subscribe?plan_id=YOUR_PAYPAL_PLAN_ID', '_blank');
}
</script>
